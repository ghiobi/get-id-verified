!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function s(){return t=" ",document.createTextNode(t);var t}function d(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function f(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let p;function g(t){p=t}const m=[],h=[],v=[],$=[],b=Promise.resolve();let y=!1;function _(t){v.push(t)}let x=!1;const w=new Set;function E(){if(!x){x=!0;do{for(let t=0;t<m.length;t+=1){const e=m[t];g(e),A(e.$$)}for(m.length=0;h.length;)h.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];w.has(e)||(w.add(e),e())}v.length=0}while(m.length);for(;$.length;)$.pop()();y=!1,x=!1,w.clear()}}function A(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(_)}}const q=new Set;function j(t,e){-1===t.$$.dirty[0]&&(m.push(t),y||(y=!0,b.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function O(c,a,u,l,s,d,f=[-1]){const m=p;g(c);const h=a.props||{},v=c.$$={fragment:null,ctx:null,props:d,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:[]),callbacks:n(),dirty:f};let $=!1;if(v.ctx=u?u(c,h,(t,e,...n)=>{const r=n.length?n[0]:e;return v.ctx&&s(v.ctx[t],v.ctx[t]=r)&&(v.bound[t]&&v.bound[t](r),$&&j(c,t)),e}):[],v.update(),$=!0,r(v.before_update),v.fragment=!!l&&l(v.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);v.fragment&&v.fragment.l(t),t.forEach(i)}else v.fragment&&v.fragment.c();a.intro&&((b=c.$$.fragment)&&b.i&&(q.delete(b),b.i(y))),function(t,n,c){const{fragment:a,on_mount:u,on_destroy:i,after_update:l}=t.$$;a&&a.m(n,c),_(()=>{const n=u.map(e).filter(o);i?i.push(...n):r(n),t.$$.on_mount=[]}),l.forEach(_)}(c,a.target,a.anchor),E()}var b,y;g(m)}function S(t){let e,n,r,o,c,p;return{c(){e=l("div"),n=l("img"),o=s(),c=l("button"),c.textContent="Edit",f(n,"class","preview-image svelte-1qp257c"),n.src!==(r=t[0])&&f(n,"src",r),f(n,"alt","Government Id"),f(c,"class","preview-edit svelte-1qp257c"),f(c,"type","button"),f(e,"class","preview svelte-1qp257c")},m(r,i,l){u(r,e,i),a(e,n),a(e,o),a(e,c),l&&p(),p=d(c,"click",t[3])},p(t,e){1&e&&n.src!==(r=t[0])&&f(n,"src",r)},d(t){t&&i(e),p()}}}function L(e){let n,r;return{c(){n=l("input"),f(n,"type","file"),f(n,"accept","image/jpeg,image/png")},m(t,o,c){u(t,n,o),c&&r(),r=d(n,"change",e[4])},p:t,d(t){t&&i(n),r()}}}function N(t){let e;return{c(){e=l("div"),f(e,"class","spinner svelte-1qp257c")},m(t,n){u(t,e,n)},d(t){t&&i(e)}}}function k(e){let n,r,o,c;function d(t,e){return t[0]?S:L}let p=d(e),g=p(e),m=e[2]&&N();return{c(){n=l("div"),g.c(),r=s(),m&&m.c(),o=s(),c=l("input"),f(c,"type","hidden"),f(c,"name","giv_upload_image_name"),c.value=e[1],f(n,"class","container svelte-1qp257c")},m(t,e){u(t,n,e),g.m(n,null),a(n,r),m&&m.m(n,null),a(n,o),a(n,c)},p(t,[e]){p===(p=d(t))&&g?g.p(t,e):(g.d(1),g=p(t),g&&(g.c(),g.m(n,r))),t[2]?m||(m=N(),m.c(),m.m(n,o)):m&&(m.d(1),m=null),2&e&&(c.value=t[1])},i:t,o:t,d(t){t&&i(n),g.d(),m&&m.d()}}}function C(t,e,n){let{source:r=""}=e,{value:o=""}=e,{action:c=""}=e,{uploading:a=!1}=e;return t.$set=t=>{"source"in t&&n(0,r=t.source),"value"in t&&n(1,o=t.value),"action"in t&&n(5,c=t.action),"uploading"in t&&n(2,a=t.uploading)},[r,o,a,()=>{n(0,r=""),n(1,o="")},({target:t})=>{const e=new XMLHttpRequest;e.open("POST",c,!0);const u=t.files[0],i=(t=>{const e=t.closest("form");return e?e.querySelector('button[type="submit"]'):null})(t);if(u){if(u.size>15e6)return alert("Please upload a file less than 15MB.");if(!u.name.split(".").pop().match(/(jpg|jpeg|png)/))return alert("Only jpg or png images are allowed.");const t=new FormData;t.append("giv_upload_image",u),e.send(t),n(2,a=!0),i&&i.setAttribute("disabled","disabled")}else alert("Please select a file.");e.onreadystatechange=()=>{4==e.readyState&&200==e.status&&(n(1,o=JSON.parse(e.response)),n(0,r=`${c}/${o}?tmp=true`)),i&&i.removeAttribute("disabled"),n(2,a=!1)}},c]}class M extends class{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}{constructor(t){super(),O(this,t,C,k,c,{source:0,value:1,action:5,uploading:2})}}window.addEventListener("DOMContentLoaded",()=>{let t=document.getElementsByTagName("giv-uploader");t&&t.length&&(t=t[0],new M({target:t,props:{source:t.getAttribute("source"),value:t.getAttribute("value"),action:t.getAttribute("action")}}))})}();
//# sourceMappingURL=bundle.js.map
